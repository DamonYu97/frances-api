{% extends 'base.html' %}

{% block content %}
<style>
form.search_form input[type=text] {
  padding: 10px;
  font-size: 17px;
  border: 1px solid grey;
  float: left;
  width: 50%;
  background: #f1f1f1;
}

form.search_form button {
  float: left;
  width: 10%;
  padding: 10px;
  background: #2196F3;
  color: white;
  font-size: 17px;
  border: 1px solid grey;
  border-left: none;
  cursor: pointer;
}

form.search_form button:hover {
  background: #0b7dda;
}

<!--form.search_form::after {
  content: "";
  clear: both;
  display: table;
}-->
</style>
 
    <p> Enter an <strong> URI of a term </strong> or <strong> some text </strong> that you would like to search similar terms for:</p>

     <!-- Load icon library -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- The form -->
        <form method="POST" action="/similar_terms" class="search_form">
  	<input type="text" placeholder="Place an URI or some text" name="resource_uri">
  	<button type="submit"><i class="fa fa-search"></i></button>

	</form> 

  {% if results %}
  <br></br>
   {% if uri %}
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  <sript src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <table class="table table-striped table-bordered table-hover">
        <thead class="thead-inverse">
            <tr> <th> URI </th> <th> Edtion </th> <th> Year </th> <th> Volume </th> <th> Term </th> <th> Original Definition</th></tr>
        </thead>
        <tbody>
               <tr>
                    <th> 
                         <script>
                         var t_key="{{uri}}".split("/").pop();
                         if ("{{uri}}".includes("Article")){
                             document.write('<a href=/visualization_resources?termlink='+t_key + '&termtype=Article>'+ "{{uri}}"+'</a>');
                             }
                         else{
                             document.write('<a href=/visualization_resources?termlink='+t_key + '&termtype=Topic>'+ "{{uri}}"+'</a>');
                             }
                         </script>
                     </th>
                    <td> {{enum}} </td>
                    <td> {{year}} </td>
                    <td> {{vnum}} </td>
                    <td> {{term}} </td>
                    <td> <script>
                          var t = "{{definition}}";
                          var minimize_character_count = 100;
                          if(t.length > minimize_character_count ){
                          document.write(
                           t.slice(0,minimize_character_count )+'<span>... </span><a href="#" class="more">More</a>'+
                           '<span style="display:none;">'+ t.slice(minimize_character_count ,t.length)+' <a href="#" class="less">Less</a></span>'
                          );
                           }
                          else {
                          var t = "{{definition}}";
                                  document.write(t);
                                }
                          $('a.more').click(function(event){
                            event.preventDefault();
                            $(this).hide().prev().hide();
                            $(this).next().show();
                           });

                           $('a.less').click(function(event){
                           event.preventDefault();
                           $(this).parent().hide().prev().show().prev().show();
                           });
                         </script></td>
               </tr>
        </tbody>
       {% endif %}
     
   <p> The first 10 similar results </p>

    <table class="table table-striped table-bordered table-hover">
        <thead class="thead-inverse">
            <tr> <th> URI </th> <th> Edtion </th> <th> Year </th> <th> Volume </th> <th> Term </th> <th> Definition</th> <th> Similitud Rank </th></tr>
        </thead>
        <tbody>
            {% for key, value in results.items() %}
               <tr>
                    <th> <script>
                         var t_key="{{key}}".split("/").pop();
                         if ("{{key}}".includes("Article")){
                             document.write('<a href=/similar_terms?termlink='+t_key + '&termtype=Article>'+ "{{key}}"+'</a>');
                             }
                         else{
                             document.write('<a href=/similar_terms?termlink='+t_key + '&termtype=Topic>'+ "{{key}}"+'</a>');
                             }
                         </script>
                     </th>
                       {% for elemen in value %}
                          <td> <script>
                          var t = "{{elemen}}";        
                          var minimize_character_count = 100;    
                          if(t.length > minimize_character_count ){
                          document.write(
                           t.slice(0,minimize_character_count )+'<span>... </span><a href="#" class="more">More</a>'+
                           '<span style="display:none;">'+ t.slice(minimize_character_count ,t.length)+' <a href="#" class="less">Less</a></span>'
                          );
                           }
                          else {
                          var t = "{{elemen}}";        
                                  document.write(t);
                                }
                          $('a.more').click(function(event){
        		    event.preventDefault();
        		    $(this).hide().prev().hide();
        		    $(this).next().show();        
                           });

                           $('a.less').click(function(event){
                           event.preventDefault();
                           $(this).parent().hide().prev().show().prev().show();    
                           });
	                 </script></td>
                      {% endfor %}
               </tr>
            {% endfor %}
        </tbody>
    </table>

  {% endif %}
{% endblock %}

