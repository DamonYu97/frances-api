{% extends 'base.html' %}

{% block content %}
<style>
form.search_form input[type=text] {
  padding: 10px;
  font-size: 17px;
  border: 1px solid grey;
  float: left;
  width: 50%;
  background: #f1f1f1;
}

form.search_form button {
  float: left;
  width: 10%;
  padding: 10px;
  background: #2196F3;
  color: white;
  font-size: 17px;
  border: 1px solid grey;
  border-left: none;
  cursor: pointer;
}

form.search_form button:hover {
  background: #0b7dda;
}

<!--form.search_form::after {
  content: "";
  clear: both;
  display: table;
}-->
</style>

<h3> Defoe Queries </h3>
<hr style="width:50%;text-align:left;margin-left:0">
 
    <p> Select the <strong> defoe query </strong> that you would to run, and introduce your configurations:</p>

     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
     <!-- Load icon library -->
         <form action ="/defoe_queries" method = "POST" enctype="multipart/form-data">
            <ul>
             <li>
    	     <label for="defoe_selection">Defoe query</label>
             <select name="defoe_selection" id="defoe_selection"> 
                {% for key, value in defoe_q.items() %}
	         <option value="{{key}}">{{ value }}</option>
		 {% endfor %}
              </select> <br>
             </li>
             <li>
    	        <label for="preprocess">Preprocess Treatment</label> <br>
			<input type="radio" id="none" name="preprocess" value="none">
  				<label for="none">None</label><br>
  			<input type="radio" id="normalize" name="preprocess" value="normalize">
  				<label for="normalize">Normalize</label><br>
  			<input type="radio" id="normalize_num" name="preprocess" value="normalize_num">
  				<label for="normalize_num">Normalize & Numbers</label> <br>
  			<input type="radio" id="lemmatize" name="preprocess" value="lemmatize" checked="checked">
  				<label for="lemmatize">Normalize & Lemmatize</label><br>
  			<input type="radio" id="stem" name="preprocess" value="stem">
  				<label for="stem">Normalize & Stemming</label> <br>

             </li>
  	     <li>
    	       <label for="data">Lexicon File</label>
               <input type = "file" name = "file" >

  	     <li>
    	       <label for="num_target">Number of Target words (Optional)</label>
    	       <input type="text" id="num_target" name="num_target" value=2>
  	     </li>
  	    <li>
               <label for="lexicon_start">Lexicon starts at position (Optional)</label>
               <input type="text" id="lexicon_start" name="lexicon_start" value=0>
            </li>
  	    <li>
               <label for="start_year">Start Year (Optional)</label>
               <input type="text" id="start_year" name="start_year" value=1771>
            </li>
  	    <li>
               <label for="end_year">End Year (Optional)</label>
               <input type="text" id="end_year" name="end_year" value=1771>
            </li>
           </ul>
         <input type="submit" value="Submit">
         </form> 

   {% if results %}
       <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
       <sript src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
       <p> <strong> Results of the defoe query </strong> </p>

        {% if "details" in defoe_selection %}
              <a href="{{ url_for('defoe_queries') }}">Download Results</a>
        {% else %} 
        <table class="table table-striped table-bordered table-hover">
        <thead class="thead-inverse">
            <tr> <th> Year </th> <th> Keyword : Frequency <th> </tr>
        </thead>
        <tbody>
            {% for key, value in results.items() %}
               <tr>
                    <th> {{key}} </th>
                    <td> 
                          <ul>
                          {% for elemen in value %}
                                <li> 
                                     {{elemen[0]}} : {{elemen[1]}}
                                </li>

                          {% endfor %}
                          </ul>
                     </td> 
               </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
   {% endif %}

{% endblock %}

