{% extends 'base.html' %}

{% block content %}
<style>
form.search_form input[type=text] {
  padding: 10px;
  font-size: 17px;
  border: 1px solid grey;
  float: left;
  width: 50%;
  background: #f1f1f1;
}

form.search_form button {
  float: left;
  width: 10%;
  padding: 10px;
  background: #2196F3;
  color: white;
  font-size: 17px;
  border: 1px solid grey;
  border-left: none;
  cursor: pointer;
}


.missing{
color:Red;
}
.missmatch{
color:blue;
}

form.search_form button:hover {
  background: #0b7dda;
}

<!--form.search_form::after {
  content: "";
  clear: both;
  display: table;
}-->
</style>

<h4> Spell Checker </h4>
<hr style="width:50%;text-align:left;margin-left:0">
    
    <p> Enter an <strong> URI of a term </strong> that you would like to check its spelling</p>
 
     <!-- Load icon library -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- The form -->
        <form method="POST" action="/spelling_checker" class="search_form">
  	<input type="text" placeholder="Place an URI" name="resource_uri">
  	<button type="submit"><i class="fa fa-search"></i></button>

	</form> 

  {% if results %}
  <br></br>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/diff_match_patch/20121119/diff_match_patch.js"></script>
  <sript src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>

    <table class="table table-striped table-bordered table-hover">
        <thead class="thead-inverse">
            <tr> <th> URI </th> <th> Edtion </th> <th> Year </th> <th> Volume </th> <th> Term </th> </tr>
        </thead>
        <tbody>
            {% for key, value in results.items() %}
               <tr>
                    <th> <script>
                         var t_key="{{key}}".split("/").pop();
                         if ("{{key}}".includes("Article")){
                             document.write('<a href=/visualization_resources?termlink='+t_key + '&termtype=Article>'+ "{{key}}"+'</a>');
                             }
                         else{
                             document.write('<a href=/visualization_resources?termlink='+t_key + '&termtype=Topic>'+ "{{key}}"+'</a>');
                             }
                         </script>
                     </th>
                       {% for elemen in value %}
                          <td> {{elemen}} </td> 
	                 </script></td>
                      {% endfor %}
               </tr>
            {% endfor %}
        </tbody>
    </table>
  


<script>
var dmp = new diff_match_patch();

function launch() {
  divColRight.innerHTML = "";
  var text1 = "{{definition}}";
  var text2 = "{{clean_definition}}";
  dmp.Diff_Timeout = parseFloat(1);
  var d = dmp.diff_main(text1, text2);
  dmp.diff_cleanupSemantic(d);
  var ds = dmp.diff_prettyHtml(d);
  document.getElementById('divColRight').innerHTML = ds;
}
</script>

<script>
    function reset() {
    divColLeft.innerHTML = "{{definition}}";
    divColRight.innerHTML = "{{clean_definition}}";
    }
</script>

<p><strong> Original Definition </strong></p>
<div id="divColLeft">{{definition}}</div>

<hr style="width:50%;text-align:left;margin-left:0">
<p><strong> Cleaned Definition </strong><input type="button" onClick="launch();" value="Compute Diff" id=""/> <input type="button" onClick="reset();" value="Reset" id=""/></p>
<div id="divColRight">{{clean_definition}}</div>


{% endif %}
{% endblock %}
